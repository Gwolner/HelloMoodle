<html>
    <head>
        <meta charset="UTF-8"/>
        <title>AVA Speech testes</title>
		<script src="Function Speech Recognition.js"></script>
    </head>
    <body>
		<p id="ola">PIBEX - Projeto AVA</p>
		<p id="ola">Você disse:</p>
		<div id="transcription"></div>
		<div id="transcription2">O que entrar deve sobrepor aqui!</div>

		<button id="rect">Gravar</button>

		<span id="unsupported" class="hidden">API not supported</span>
		
		<h1><a href="#">Ola mundo</a></h1>
		<h1><a href="#">IFPE</a></h1>
		<h1><a href="#">Pesquisa</a></h1>
		<h1><a href="#">Moodle</a></h1>
		<h1><a href="#">Artigo</a></h1>
		<h1><a href="#">Javascript</a></h1>
		<h1><a href="#">PHP</a></h1>

		<script>
		
		// Test browser support
		window.SpeechRecognition = window.SpeechRecognition ||
		window.webkitSpeechRecognition ||
		null;

		//caso não suporte esta API DE VOZ            
		if (window.SpeechRecognition === null) {
			//document.getElementById('unsupported').classList.remove('hidden');
			alert("API NÃO suportada!");
		}else {
			//......
			//alert("API suportada!");
			
			var recognizer = new SpeechRecognition();
		
			var transcription = document.getElementById("transcription");

			//Para o reconhecedor de voz, não parar de ouvir, mesmo que tenha pausas no usuario
			recognizer.continuous = true;
			recognizer.lang = "pt-BR";
				
			recognizer.onresult = function(event){
				//transcription.textContent = "";
				for (var i = event.resultIndex; i < event.results.length; i++) {
					if(event.results[i].isFinal){
						
						var pegaRetorno = (event.results[i][0].transcript.trim()).toUpperCase();
						transcription.textContent = pegaRetorno+' (Taxa de acerto [0/1] : ' + event.results[i][0].confidence + ')';
						
						//alert("("+pegaRetorno+")");
						if(pegaRetorno == "CLICK" || pegaRetorno == "LIKE"){// || pegaRetorno == " click" || pegaRetorno == " like"){
							//alert("COMANDO CLICK!");	
							//selectAllPure();
							contextClick();
						}
						
						if(pegaRetorno == "CASA"){// || pegaRetorno == " casa"){
							alert("COMANDO CASA!");
						}
						
						
					}else{
						transcription.textContent += pegaRetorno;	
					}
				}
			}
			
			recognizer.start();
			<!-- document.querySelector("#rect").addEventListener("click",function(){ -->
				<!-- try { -->
					<!-- recognizer.start(); -->
				  <!-- } catch(ex) { -->
					<!-- alert("error: "+ex.message); -->
				  <!-- } -->
			<!-- }); -->
		}
		
		
		
		</script>
    </body>
</html>